<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carta, Forbici e Sasso - Il Gioco Definitivo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            padding: 40px 0;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4);
            background-size: 400% 400%;
            animation: gradientShift 8s ease infinite;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .header h1 {
            font-size: 3.5rem;
            font-weight: 900;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .header p {
            font-size: 1.3rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
        }

        .game-modes {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin: 60px 0;
        }

        .mode-card {
            background: linear-gradient(145deg, #1e1e2f 0%, #2a2a3e 100%);
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .mode-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: -1;
        }

        .mode-card:hover::before {
            opacity: 0.1;
        }

        .mode-card:hover {
            transform: translateY(-10px);
            border-color: #4ecdc4;
            box-shadow: 0 20px 40px rgba(78, 205, 196, 0.3);
        }

        .mode-card h3 {
            font-size: 2rem;
            margin-bottom: 20px;
            color: #4ecdc4;
        }

        .mode-card p {
            opacity: 0.8;
            line-height: 1.6;
            margin-bottom: 30px;
        }

        .btn {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 20px rgba(255, 107, 107, 0.4);
        }

        .game-area {
            display: none;
            background: rgba(30, 30, 47, 0.8);
            border-radius: 20px;
            padding: 40px;
            margin: 40px 0;
            backdrop-filter: blur(10px);
        }

        .game-area.active {
            display: block;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .players {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 40px;
            align-items: center;
            margin: 40px 0;
        }

        .player {
            text-align: center;
            padding: 30px;
            background: linear-gradient(145deg, #2a2a3e, #1e1e2f);
            border-radius: 15px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .player.active {
            border-color: #4ecdc4;
            box-shadow: 0 0 30px rgba(78, 205, 196, 0.3);
        }

        .player h3 {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: #4ecdc4;
        }

        .moves {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
        }

        .move-btn {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: 3px solid #4ecdc4;
            background: transparent;
            color: white;
            font-size: 2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .move-btn:hover {
            background: #4ecdc4;
            transform: scale(1.1);
            box-shadow: 0 10px 20px rgba(78, 205, 196, 0.4);
        }

        .vs {
            font-size: 3rem;
            font-weight: 900;
            color: #ff6b6b;
            text-shadow: 0 0 20px rgba(255, 107, 107, 0.5);
        }

        .scoreboard {
            background: linear-gradient(145deg, #1e1e2f, #2a2a3e);
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            text-align: center;
        }

        .scoreboard h3 {
            color: #4ecdc4;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }

        .scores {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 20px 0;
        }

        .score-item {
            background: rgba(78, 205, 196, 0.1);
            border-radius: 10px;
            padding: 20px;
            border: 1px solid rgba(78, 205, 196, 0.3);
        }

        .score-item .label {
            font-size: 0.9rem;
            opacity: 0.8;
            margin-bottom: 5px;
        }

        .score-item .value {
            font-size: 2rem;
            font-weight: 900;
            color: #4ecdc4;
        }

        .result {
            text-align: center;
            padding: 30px;
            margin: 30px 0;
            border-radius: 15px;
            font-size: 1.3rem;
            font-weight: 600;
            display: none;
        }

        .result.win {
            background: linear-gradient(45deg, rgba(76, 175, 80, 0.2), rgba(139, 195, 74, 0.2));
            border: 2px solid #4caf50;
            color: #4caf50;
        }

        .result.lose {
            background: linear-gradient(45deg, rgba(244, 67, 54, 0.2), rgba(255, 87, 34, 0.2));
            border: 2px solid #f44336;
            color: #f44336;
        }

        .result.tie {
            background: linear-gradient(45deg, rgba(255, 193, 7, 0.2), rgba(255, 152, 0, 0.2));
            border: 2px solid #ffc107;
            color: #ffc107;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
        }

        .btn-secondary {
            background: transparent;
            border: 2px solid #4ecdc4;
            color: #4ecdc4;
            padding: 12px 25px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .btn-secondary:hover {
            background: #4ecdc4;
            color: #1e1e2f;
            transform: scale(1.05);
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(78, 205, 196, 0.3);
            border-top: 3px solid #4ecdc4;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #4ecdc4;
            border-radius: 50%;
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 1; }
            50% { transform: translateY(-100px) rotate(180deg); opacity: 0.5; }
        }

        @media (max-width: 768px) {
            .header h1 { font-size: 2.5rem; }
            .players { grid-template-columns: 1fr; gap: 20px; }
            .vs { font-size: 2rem; }
            .moves { flex-wrap: wrap; }
            .move-btn { width: 60px; height: 60px; font-size: 1.5rem; }
        }
    </style>
</head>
<body>
<div class="particles" id="particles"></div>

<div class="container">
    <header class="header">
        <h1>Carta, Forbici e Sasso</h1>
        <p>Il gioco definitivo per menti strategiche. Scegli la tua modalità e preparati alla battaglia!</p>
    </header>

    <div id="menu" class="game-modes">
        <div class="mode-card" onclick="startGame('human')">
            <h3>🎮 Umano vs Computer</h3>
            <p>Sfida l'intelligenza artificiale in una battaglia epica. Usa la tua strategia per battere l'algoritmo!</p>
            <button class="btn">Inizia Sfida</button>
        </div>

        <div class="mode-card" onclick="startGame('computer')">
            <h3>🤖 Computer vs Computer</h3>
            <p>Osserva due IA combattere in una simulazione avvincente. Chi avrà la meglio?</p>
            <button class="btn">Osserva Battaglia</button>
        </div>
    </div>

    <div id="gameArea" class="game-area">
        <div class="scoreboard">
            <h3>📊 Classifica</h3>
            <div class="scores">
                <div class="score-item">
                    <div class="label" id="player1Label">Giocatore 1</div>
                    <div class="value" id="player1Score">0</div>
                </div>
                <div class="score-item">
                    <div class="label">Pareggi</div>
                    <div class="value" id="tieScore">0</div>
                </div>
                <div class="score-item">
                    <div class="label" id="player2Label">Giocatore 2</div>
                    <div class="value" id="player2Score">0</div>
                </div>
            </div>
        </div>

        <div class="players">
            <div class="player" id="player1">
                <h3 id="p1Name">Tu</h3>
                <div class="moves" id="p1Moves">
                    <button class="move-btn" onclick="playerMove('rock')">🗿</button>
                    <button class="move-btn" onclick="playerMove('paper')">📄</button>
                    <button class="move-btn" onclick="playerMove('scissors')">✂️</button>
                </div>
                <div id="p1Choice" class="choice"></div>
            </div>

            <div class="vs">VS</div>

            <div class="player" id="player2">
                <h3 id="p2Name">Computer</h3>
                <div class="moves">
                    <div class="move-btn">🤔</div>
                </div>
                <div id="p2Choice" class="choice"></div>
            </div>
        </div>

        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>Il computer sta pensando...</p>
        </div>

        <div class="result" id="result"></div>

        <div class="controls">
            <button class="btn-secondary" onclick="playAgain()">🔄 Nuovo Round</button>
            <button class="btn-secondary" onclick="resetGame()">🏠 Menu Principale</button>
            <button class="btn-secondary" onclick="newGame()">🎮 Nuova Partita</button>
        </div>
    </div>
</div>

<script>
    // Game state
    let gameMode = '';
    let scores = { player1: 0, player2: 0, ties: 0 };
    let isGameActive = false;
    let roundInProgress = false;

    // Move mappings
    const moves = {
        rock: { emoji: '🗿', name: 'Sasso' },
        paper: { emoji: '📄', name: 'Carta' },
        scissors: { emoji: '✂️', name: 'Forbici' }
    };

    const winConditions = {
        rock: 'scissors',
        paper: 'rock',
        scissors: 'paper'
    };

    // Initialize particles
    function createParticles() {
        const particlesContainer = document.getElementById('particles');
        for (let i = 0; i < 50; i++) {
            const particle = document.createElement('div');
            particle.className = 'particle';
            particle.style.left = Math.random() * 100 + '%';
            particle.style.top = Math.random() * 100 + '%';
            particle.style.animationDelay = Math.random() * 6 + 's';
            particle.style.animationDuration = (Math.random() * 3 + 3) + 's';
            particlesContainer.appendChild(particle);
        }
    }

    // Start game
    function startGame(mode) {
        gameMode = mode;
        isGameActive = true;

        document.getElementById('menu').style.display = 'none';
        document.getElementById('gameArea').classList.add('active');

        if (mode === 'human') {
            document.getElementById('p1Name').textContent = 'Tu';
            document.getElementById('p2Name').textContent = 'Computer';
            document.getElementById('player1Label').textContent = 'Le Tue Vittorie';
            document.getElementById('player2Label').textContent = 'Vittorie Computer';
            document.getElementById('p1Moves').style.display = 'flex';
        } else {
            document.getElementById('p1Name').textContent = 'Computer 1';
            document.getElementById('p2Name').textContent = 'Computer 2';
            document.getElementById('player1Label').textContent = 'Computer 1';
            document.getElementById('player2Label').textContent = 'Computer 2';
            document.getElementById('p1Moves').style.display = 'none';

            // Auto-play for computer vs computer
            setTimeout(autoPlay, 1000);
        }
    }

    // Player move
    function playerMove(move) {
        if (roundInProgress || !isGameActive) return;

        roundInProgress = true;
        document.getElementById('loading').style.display = 'block';
        document.getElementById('result').style.display = 'none';

        // Show player choice
        document.getElementById('p1Choice').innerHTML = `
                <div style="font-size: 3rem; margin: 20px 0;">${moves[move].emoji}</div>
                <div>${moves[move].name}</div>
            `;

        // Computer move after delay
        setTimeout(() => {
            const computerMove = getRandomMove();
            document.getElementById('p2Choice').innerHTML = `
                    <div style="font-size: 3rem; margin: 20px 0;">${moves[computerMove].emoji}</div>
                    <div>${moves[computerMove].name}</div>
                `;

            document.getElementById('loading').style.display = 'none';
            determineWinner(move, computerMove);
        }, 1500);
    }

    // Auto-play for computer vs computer
    function autoPlay() {
        if (!isGameActive || gameMode !== 'computer') return;

        roundInProgress = true;
        document.getElementById('loading').style.display = 'block';
        document.getElementById('result').style.display = 'none';

        setTimeout(() => {
            const move1 = getRandomMove();
            const move2 = getRandomMove();

            document.getElementById('p1Choice').innerHTML = `
                    <div style="font-size: 3rem; margin: 20px 0;">${moves[move1].emoji}</div>
                    <div>${moves[move1].name}</div>
                `;

            document.getElementById('p2Choice').innerHTML = `
                    <div style="font-size: 3rem; margin: 20px 0;">${moves[move2].emoji}</div>
                    <div>${moves[move2].name}</div>
                `;

            document.getElementById('loading').style.display = 'none';
            determineWinner(move1, move2);

            // Continue auto-play
            setTimeout(autoPlay, 3000);
        }, 1500);
    }

    // Get random move
    function getRandomMove() {
        const moveKeys = Object.keys(moves);
        return moveKeys[Math.floor(Math.random() * moveKeys.length)];
    }

    // Determine winner
    function determineWinner(move1, move2) {
        let result = '';
        let resultClass = '';

        if (move1 === move2) {
            result = '🤝 Pareggio! Stessa mossa!';
            resultClass = 'tie';
            scores.ties++;
        } else if (winConditions[move1] === move2) {
            if (gameMode === 'human') {
                result = '🎉 Hai vinto questo round! Ottima mossa!';
            } else {
                result = '🎉 Computer 1 vince questo round!';
            }
            resultClass = 'win';
            scores.player1++;
        } else {
            if (gameMode === 'human') {
                result = '😅 Il computer ha vinto questo round!';
            } else {
                result = '🎉 Computer 2 vince questo round!';
            }
            resultClass = 'lose';
            scores.player2++;
        }

        // Show result
        const resultElement = document.getElementById('result');
        resultElement.textContent = result;
        resultElement.className = `result ${resultClass}`;
        resultElement.style.display = 'block';

        // Update scores
        updateScoreboard();

        // Add celebration effect for wins
        if (resultClass === 'win') {
            createCelebration();
        }

        roundInProgress = false;
    }

    // Update scoreboard
    function updateScoreboard() {
        document.getElementById('player1Score').textContent = scores.player1;
        document.getElementById('player2Score').textContent = scores.player2;
        document.getElementById('tieScore').textContent = scores.ties;
    }

    // Create celebration effect
    function createCelebration() {
        for (let i = 0; i < 20; i++) {
            const particle = document.createElement('div');
            particle.style.position = 'fixed';
            particle.style.left = '50%';
            particle.style.top = '50%';
            particle.style.width = '10px';
            particle.style.height = '10px';
            particle.style.background = `hsl(${Math.random() * 360}, 70%, 60%)`;
            particle.style.borderRadius = '50%';
            particle.style.pointerEvents = 'none';
            particle.style.zIndex = '1000';

            const angle = (Math.PI * 2 * i) / 20;
            const velocity = 100 + Math.random() * 100;

            document.body.appendChild(particle);

            particle.animate([
                { transform: 'translate(-50%, -50%) scale(1)', opacity: 1 },
                {
                    transform: `translate(${Math.cos(angle) * velocity - 50}px, ${Math.sin(angle) * velocity - 50}px) scale(0)`,
                    opacity: 0
                }
            ], {
                duration: 1000,
                easing: 'ease-out'
            }).onfinish = () => particle.remove();
        }
    }

    // Play again
    function playAgain() {
        document.getElementById('p1Choice').innerHTML = '';
        document.getElementById('p2Choice').innerHTML = '';
        document.getElementById('result').style.display = 'none';
        document.getElementById('loading').style.display = 'none';

        if (gameMode === 'computer') {
            setTimeout(autoPlay, 500);
        }
    }

    // Reset game
    function resetGame() {
        isGameActive = false;
        roundInProgress = false;
        scores = { player1: 0, player2: 0, ties: 0 };
        updateScoreboard();

        document.getElementById('gameArea').classList.remove('active');
        document.getElementById('menu').style.display = 'grid';

        // Reset UI
        document.getElementById('p1Choice').innerHTML = '';
        document.getElementById('p2Choice').innerHTML = '';
        document.getElementById('result').style.display = 'none';
        document.getElementById('loading').style.display = 'none';
    }

    // New game (reset scores but stay in same mode)
    function newGame() {
        scores = { player1: 0, player2: 0, ties: 0 };
        updateScoreboard();
        playAgain();
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
        createParticles();
        updateScoreboard();
    });
</script>
</body>
</html>